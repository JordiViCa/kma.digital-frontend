<div *ngIf="task" class="w-full h-full flex overflow-auto py-20" id="goBack" (mousedown)="goBack($event)">
  <div class="mx-4 md:mx-20 bg-white w-full h-full shadow-md rounded-3xl p-4 md:p-10 relative flex flex-col mb-auto border-t-2" [ngStyle]="{'border-top-color': task.category.color}">
    <div class="flex flex-col-reverse md:flex-row gap-5">
      <p contenteditable="true" id="title" (focusout)="saveContents($event)" [innerText]="title" class="uppercase md:w-1/2 text-3xl rounded-lg w-full disabled:bg-transparent font-semibold p-2"></p>
      <div class="flex justify-between md:w-1/2 w-full mb-auto my-auto">
        <select class="rounded-md max-w-[40%] w-full" (change)="saveTask()" [(ngModel)]="category">
          <option [value]="category._id" *ngFor="let category of categories">{{ category.name }}</option>
        </select>
        <label for="difficulty" class="flex px-2">
          <select (change)="saveTask()" [(ngModel)]="difficulty" id="difficulty" name="difficulty" class="border-0 py-0 pr-8 rounded-lg pl-2">
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
          </select>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-500 my-auto" viewBox="0 0 512 512"><path fill="currentColor" d="M394 480a16 16 0 01-9.39-3L256 383.76 127.39 477a16 16 0 01-24.55-18.08L153 310.35 23 221.2a16 16 0 019-29.2h160.38l48.4-148.95a16 16 0 0130.44 0l48.4 149H480a16 16 0 019.05 29.2L359 310.35l50.13 148.53A16 16 0 01394 480z"/></svg>
        </label>
      </div>
    </div>
    <hr class="border-b-2 mt-2 mb-4 border-b-blauf">
    <div class="flex flex-col md:flex-row gap-5 md:justify-between overflow-hidden h-full">
      <p contenteditable="true" id="description" (focusout)="saveContents($event)" [innerText]="description" class="text-justify md:w-1/2 h-full min-h-[50%] max-h-full inline-block p-2 break-words rounded-lg w-full overflow-auto"></p>
      <div class="flex flex-col md:w-1/2 rounded-xl relative gap-2 min-h-[40%]">
        <p class="text-2xl uppercase font-semibold mb-4 select-none flex">Tracked hours - {{ calcHours(task.tracking) }}
          <svg *ngIf="checkTracking(task,true)" (click)="startStop(true)" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 my-auto text-green-500 cursor-pointer" viewBox="0 0 512 512"><path fill="currentColor" d="M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm74.77 217.3l-114.45 69.14a10.78 10.78 0 01-16.32-9.31V186.87a10.78 10.78 0 0116.32-9.31l114.45 69.14a10.89 10.89 0 010 18.6z"/></svg>
          <svg *ngIf="checkTracking(task,false)" (click)="startStop(false)" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 my-auto text-red-500 cursor-pointer" viewBox="0 0 512 512"><path fill="currentColor" d="M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm80 262.4a25.62 25.62 0 01-25.6 25.6H201.6a25.62 25.62 0 01-25.6-25.6V201.6a25.62 25.62 0 0125.6-25.6h108.8a25.62 25.62 0 0125.6 25.6z"/></svg>
        </p>
        <div class="overflow-auto flex flex-col gap-2 pr-2 pb-2">
          <ng-container *ngFor="let track of task.tracking"><p class="bg-blancb px-2 py-1 rounded-md shadow-md select-none flex justify-between" *ngIf="track.endTrack"><span>{{ track.employee.name }} - {{ getHours(track) }}</span> <span class="flex gap-2"><span class="opacity-50 my-auto">{{ track.startTrack | date:'dd-mm-yyy'}}</span> <svg (click)="deleteTask(track._id)" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-500 my-auto cursor-pointer" viewBox="0 0 512 512"><path d="M296 64h-80a7.91 7.91 0 00-8 8v24h96V72a7.91 7.91 0 00-8-8z" fill="none"/><path fill="currentColor" d="M432 96h-96V72a40 40 0 00-40-40h-80a40 40 0 00-40 40v24H80a16 16 0 000 32h17l19 304.92c1.42 26.85 22 47.08 48 47.08h184c26.13 0 46.3-19.78 48-47l19-305h17a16 16 0 000-32zM192.57 416H192a16 16 0 01-16-15.43l-8-224a16 16 0 1132-1.14l8 224A16 16 0 01192.57 416zM272 400a16 16 0 01-32 0V176a16 16 0 0132 0zm32-304h-96V72a7.91 7.91 0 018-8h80a7.91 7.91 0 018 8zm32 304.57A16 16 0 01320 416h-.58A16 16 0 01304 399.43l8-224a16 16 0 1132 1.14z"/></svg></span></p></ng-container>
        </div>
        <p *ngIf="task.tracking.length < 1 || !task.tracking[0].endTrack" class="bg-blancb px-2 py-1 rounded-md shadow-md select-none font-semibold uppercase text-center">There are no tracked hours</p>
      </div>
    </div>
    <div *ngIf="confirmationDelete" id="closeConfirmation" class="w-full h-full absolute top-0 left-0 rounded-3xl backdrop-blur-sm flex">
      <div class="m-auto bg-blancb rounded-2xl p-5 shadow-lg">
        <p class="text-2xl uppercase font-semibold mb-4 select-none">Confirm delete of tracked hour?</p>
        <div class="flex justify-around">
          <button id="closeConfirmation" class="px-4 py-2 rounded-lg transition-all duration-300 font-semibold hover:bg-red-600 bg-red-500">Go back</button>
          <button (click)="deleteTask(1)" class="px-4 py-2 rounded-lg transition-all duration-300 font-semibold hover:bg-green-600 bg-green-500">Delete</button>
        </div>
      </div>
    </div>
  </div>
</div>